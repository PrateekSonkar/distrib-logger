<html>
  <head>
    <title><%= title %></title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
    <script src="/javascripts/dashboard.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
      <header>
        <div>
          <nav class="indigo darken-2">
            <div class="nav-wrapper">
              <div class="valign-wrapper">
                <b class="center-align">Monitoring Dashboard</b>
              </div>
            </div>
          </nav>
        </div>
      </header>
      <div>
        <ul id="slide-out" class="side-nav">
          <li>
            <div class="userView">
              <img class="background" src="data:image/jpeg;base64,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">
              <a href="#!user"><img class="circle" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAH0AfQMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAAAwQFBgcCAQj/xAA+EAABAwIDBQUEBwYHAAAAAAABAAIDBBEFEiEGEzFBUSJhcYGRMqGxwQcUFSMzUtFCYmNykvAlQ0RTsuHx/8QAGQEBAAMBAQAAAAAAAAAAAAAAAAEEBQMC/8QAJxEAAgIBBAAFBQEAAAAAAAAAAAECAxEEEiExExQiUWEzQUKBsTL/2gAMAwEAAhEDEQA/AFkIQgBMcbrZMOw59VExr3NewZXcDdwHzT5VjaTFKqNs9BNQxiOVvZkEpNxyI04g2QEPi2KjEpo5XUghla3K4tkzZhxHIcLn1TRcsIczUWPMHkvb9EB6jmvMwXt0B45odoVzG2wIPXRd3RcDjogFaSrnopt7TSGOTnza7uI5q14btJR1bo4ZyYKg6EO9ku7j+qpxsRoVw+PO51zoRa39+KA05Cidm659ZQkSmIPiIZlYCLC2nEqWQAhCEAIQhAB4H5Kj41iM829o5A57YpczHzNAkb1BsbFXhZvXSF9TUSHXPK93q4oBAPaSC7su6roPbfQgg9Crt9HOykWIf4ticWemY/LTxPHZkcOLj1AOgHUFaLUYLhNU7NVYXQzO/NLTMcfeFXnqFGWMFqvSynHOcGBvFtRqCuLkc1udRsjs9Ue1g9IzS14Wbr/hZR8n0d7MP/0UzfCrl+blHmoEvRz9zHC4kLzNbmtdk+jXAHC0ZrI+8T3+IK7pPo52fgcHTMqamxvaWYgeYba6nzMCPKWGTUlJU1Uc81LA+WKmYXzPaOzG0dT8uK8Y7MvoCKgo4aI0UNLFHSFpYYY2BrbHjoFie1mz0+zmJmDV9LJd1PL+ZvQ944e/mpqvU20Rdp3WkxfZSYx4qY79maMg+I1Hz9VcVRtmbuxmnI5Zif6Sryu5WBCEIAQhCAFme7dUVMcLNJJpGsaf3nGw95WmKh4KGs2qomv4Nrmt889viok8LJMVlpG3YXSx0OH09JAAIoWBjR3DRO1GHGsPgGSSc3HEtY5w9QLIZj2Fv4VkY/mBHxCx85N7Y10iTQm8NbST23NTC8nk14JThCAQvCbJtLiFHCbS1cDT0MgQDpVr6QKCOu2ZrS9t5KeJ1RGeYcwX94BHmpJ2P4W02+uMP8oJ+ATbFK6lxHCq2KlmD3OppW5SCDq0jgVMJYksESg3F5RlOx7M2KZrezE4+8D5q6qobFa1cp/g/MK3rYMIEIQgBCEIADXOc1kYzPe4NaOpKpOKYe+i2w+pPsXmvjBLb27b2u0/qV8ob/aFMGmxLyGnoS0ge+yitp8OjptvcHlZG1kdQ6B1rW7TXWPno1V3Y/EcfgtKpeFGS7yXmGgnfljp9265sMzsoCr23UlXsyYzU09JUNkjzgnQF2axa24OYgG54aX6K3Ux7JHelZAJGZJBnbe+V2oVGDgl6lk0rHbn0yx+ii7O0b9oMKfiTcIcynbIWFzHEEkAElo5gXtpzB6K60wEcTYhf7tobqbnglWjIAGdkAaAaWTejdnMz+r7D0C8y259KPSlNr1vIhjNH9dpWw5ZXnOLMiJBd3eCo+1Ej9l5xFPhUO8LWOax0uYuBvqNDe1rG3AkdVpHDguJIo5QBLG14HDM0Gy9R2dyWTzKVmMQeCB2Xoa7FsAixaOGmgZIXWhcMl2g2DgbcD3pzLQOlLWz6DkL3I81MEktDSTYcB0TaX8YeSibj+Kweq3Z1N5Mm2FoZ5jiUkIaTSRsztIN3Al3D+kqygggEcCLhH0fUbfszEMRLGgy1zix/wDDadfLVwSdOLU8QtbsD4LQrm3Y0ZdtaVUZfcUQhC7lUEIQgPHC40JBGoI4g9VztfMazCMLxd1hPhtcwTnuLh8SGeq7SVXG6egrKMZTHVxGOQO68WuHeDYrjbDLUkWabFtcG+/6XqnPaIThReE1G/paeXmW2d4jQ+9SizDWl2JzOyRki1zoLm3Fc08TYc4abi4vfrb/AMSrgCCCLgpkwuonubunvhcbtDTw7tUIHM8u5yEi4Lw09dTbT++F0qm8DHOfvphZ50a38gThACjMTqBT0lTUX/Djc4eIGiknGwJVfx6p3UMMYAc58ocWngQ03PyTnPBKxjkjYg7CtmsMwWOwkNOH1J8dT6kn0TVdSyyVEz55yDLIbm3AdAO5crTphtWX2zI1Fik9sekCEIXYrghCEAIQhASmz9RlklpHG2Y7yMfEfA+as7HZmg9VRMz43NlidlfGczT/AHyKtmEV8VdTNlido7iL+yeizL69k/hmxp7PEr+UOqmqhpWh078jTzINvXkm7cXo3uAjkc8fma3RP1HYxicWDUT62skywNcB2Yi43JsOBXJJt4R1ykss8+26Ae3MWE8ARe/pdP4pGyxtkZfK7UXaQfQpGkl+tQw1LXAxSxtkZ2CDYi4vdOVBPD6Eqh1m26qoYnUfWq+R4N2RDdtPXqfX4KXx7EjC3cQO+/kGlv2G83foq81oa0NHAKzpa8y3exV1duyGxds9QhC0DLBCEIAQhIVlZBRxCSd9gTZoAuXHoAgF0KFkx5xvuKJ3jLIG/C6i63HK933bZ2QSO4MibcgeJuT5IB/tDXZnPpGOtHGzNOevMN9NT4hW7CKGaiwnDnU/3c7KSNrg72ZBlGh/VZlupZ4ZoXudvJ5BFqbu7Vtb8zcreHxxlu7LRlGgHRU9X0kaGgeG2RlPj1E6X6vVytpKm193O4Nv/KeB8lA7a7U4VDRfUWw0+KumI3kAns1rRrcuANje1h4qS2n2djxnDpKSN7Wz23kDnjQOHf0PA+Kyqp2fxylJbNg9Zx/y4jIPVtwudEIS5bPepsnF4iuGa1hG1WC4hSMkjrYKd+UZoJnhjo+6x4jvGi6kx6GrDo8Ic2pcDYyj8Nvnz8lmGE7I41iNXDHJh9RS07j95PO3Jkb3A6k+S1agpaaCRtHSsBhpmAG2jW9G+PM+XVeL4Rh/lnTTWSlzNdFI21p5aX7NqGSyCV0rw6fm52W/ppwXWFVorqQPcA2VhySNHI/odD5qwfSNTCXZh8wHbpZopGHp2g0+5xWZsrqqgqnyUzw0ENJBF2uHQ9Dx1042VvS/TwU9a825LwhQFNtBKWgy0zZWng+F1vUO4eqexY5ROIEpkgJ/3GG3qLj3qwVCSQgagHkdQhAcyyMhifLI4NYwEuJ5BVOepfV1JqZrtc7SNn5Gfqef/SmNpJC2jhiHCaYNd4AF3xaFXJXkzt8T8CgFDP0auM1nFwa0E8SBquUHggHeztO+ux3DKVvtS1zNe4OBPuaVtM9BWU9808oHVzGke4BZR9GsYk24wa/KWR/o2VfQ5F+K420qw703urpFAmhr2vEgfHMW8MoykeRNj6hO6WpbUsJDXMe05XsdoWlWiXDqaXXd5T+5omc2DsZ2mzHU21aqctNOJejrK5d8EFU7543cFmE8ZT+yO4cyuqanjpoRHHew1JJuSeZPep6HB4tDJI53cBZPoaOnhN442h35jqV6jppvlnmesguFyUnarDqiq2UxW0RsKV7xfTVouPgsXiktISRcGMC3XUr6axaMS4XWRO9l8D2nzaV8vUbi5kTjxdEL+jf1VyutVrCKNtrseWPIdzEXbtmTNxA4JYPa7QFNV6PaC6HIm8CrDDK2ilP3T/wST7J/L4cx5qeVHY9zqZzwcr2NEjT0cNR71doX7yJklrZmh1ul0B//2Q=="></a>
              <a href="#!name"><span class="white-text name">Prateek</span></a>
              <a href="#!email"><span class="white-text email">prateek@a.com</span></a>
            </div>
          </li>
          <li><a class="waves-effect" href="">Mongodb Stats</a></li>
          <li><div class="divider"></div></li>
        </ul>
        <div class="fixed-action-btn click-to-toggle" style="bottom: 45px; left: 24px;">
          <a class="btn-floating btn-large pink accent-2 button-collapse" data-activates="slide-out">
            <i class="material-icons">menu</i>
          </a>
        </div>
      </div>
      <div class="">
        <div class="row">
          <div class="col s6">
            <div id="cpustats" style="width:100%; height:300px;"></div>
          </div>
          <div class="col s6">
              <div id="memorystats" style="width:100%; height:300px;"></div>
          </div>
        </div>
        <div class="row">
          <div class="col s6">
            <div id="gcstats" style="width:100%; height:300px;"></div>
          </div>
          <div class="col s6">
            <div id="elstats" style="width:100%; height:300px;"></div>
          </div>
        </div>
        <div class="row">
          <div class="col s6">
            <div id="lstats" style="width:100%; height:300px;"></div>
          </div>
          <div class="col s6">
            <div id="httpstats" style="width:100%; height:300px;"></div>
          </div>
        </div>
      </div>
      <script type="text/javascript">
      var cpuChart,memoryChart,gcChart,elChart,loChart;
      $('.button-collapse').sideNav({
          menuWidth: 300, // Default is 240
          edge: 'left', // Choose the horizontal origin
          closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor
        }
      );
      var socket = io('http://localhost:3000');

      $(document).ready(function() {
        cpuChart = new Highcharts.Chart({
            chart: {
                renderTo: 'cpustats',
                defaultSeriesType: 'spline'
            },
            title: {
                text: 'CPU Stats'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150,
                maxZoom: 20 * 1000
            },
            yAxis: {
                minPadding: 0.2,
                maxPadding: 0.2,
                title: {
                    text: 'Value',
                    margin: 80
                }
            },
            series: [{
                name: 'System',
                data: []
            },
            {
                name: 'Process',
                data: []
            }
          ]
        });

        memoryChart = new Highcharts.Chart({
            chart: {
                renderTo: 'memorystats',
                defaultSeriesType: 'spline'
            },
            title: {
                text: 'Memory Stats'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150,
                maxZoom: 20 * 1000
            },
            yAxis: {
                minPadding: 0.2,
                maxPadding: 0.2,
                title: {
                    text: 'Value',
                    margin: 80
                }
            },
            series: [{
                name: 'Physical Available',
                data: []
            },
            {
                name: 'Physical Used',
                data: []
            },
            {
                name: 'Physical Node',
                data: []
            },
            {
                name: 'Virtual Node',
                data: []
            }
          ]
        });

        gcChart = new Highcharts.Chart({
            chart: {
                renderTo: 'gcstats',
                defaultSeriesType: 'spline'
            },
            title: {
                text: 'Garbage Collection Stats'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150,
                maxZoom: 20 * 1000
            },
            yAxis: {
                minPadding: 0.2,
                maxPadding: 0.2,
                title: {
                    text: 'Value',
                    margin: 80
                }
            },
            series: [{
                name: 'Available JS Heap',
                data: []
            },
            {
                name: 'Used JS Heap',
                data: []
            }
          ]
        });

        elChart = new Highcharts.Chart({
            chart: {
                renderTo: 'elstats',
                defaultSeriesType: 'spline'
            },
            title: {
                text: 'Event Loop Latency Stats'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150,
                maxZoom: 20 * 1000
            },
            yAxis: {
                minPadding: 0.2,
                maxPadding: 0.2,
                title: {
                    text: 'Value',
                    margin: 80
                }
            },
            series: [{
                name: 'Minimum',
                data: []
            },
            {
                name: 'Maximum',
                data: []
            },
            {
                name: 'Average',
                data: []
            }
          ]
        });

        loChart = new Highcharts.Chart({
            chart: {
                renderTo: 'lstats',
                defaultSeriesType: 'spline'
            },
            title: {
                text: 'Event Tick Stats'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150,
                maxZoom: 20 * 1000
            },
            yAxis: {
                minPadding: 0.2,
                maxPadding: 0.2,
                title: {
                    text: 'Value',
                    margin: 80
                }
            },
            series: [{
                name: 'Shortest Tick',
                data: []
            },
            {
                name: 'Longest Tick',
                data: []
            },
            {
                name: 'Average Tick',
                data: []
            }
          ]
        });

        getServerList();

        $("ul").delegate("li","click",function(){
          console.log("Delegate called : " + $(this).attr("rel"));
          var obj = {};
          obj.toserver = $(this).attr('rel');
          $(this).siblings().each(function(idx){
            if($(this).hasClass('selserver')){
              obj.fromserver = $(this).attr('rel');
              $(this).removeClass('selserver').children('a').removeClass('disabled');
            }
          });
          $(this).addClass('selserver').children('a').addClass('disabled');
          sendToServer(obj);
          console.log("Obj to send : " + JSON.stringify(obj));
          resetGraph();
        });
      });

      socket.on('clicpu', function(data,server){

        console.log("receing message from server " + server)
        console.log("receing data from server " + JSON.stringify(data));
          if(cpuChart.series.length == 2){
            cpuChart.series[0].addPoint([data.time,data.system], false, (cpuChart.series[0].data.length > 20)); // add the point
            cpuChart.series[1].addPoint([data.time,data.process], true, (cpuChart.series[1].data.length > 20)); // add the point
          } else {
            console.log("not identified");
          }
      });

      socket.on('climemory', function(data){
          console.log('climemory '+ JSON.stringify(data));
          memoryChart.series[0].addPoint([data.time,data.physical_total], false, (memoryChart.series[0].data.length > 20)); // add the point
          memoryChart.series[1].addPoint([data.time,data.physical_used], false, (memoryChart.series[1].data.length > 20)); // add the point
          memoryChart.series[2].addPoint([data.time,data.physical], false, (memoryChart.series[2].data.length > 20)); // add the point
          memoryChart.series[3].addPoint([data.time,data.virtual], true, (memoryChart.series[3].data.length > 20)); // add the point

      });

      socket.on('clieventloop', function(data){
          elChart.series[0].addPoint([data.time,data.latency.min], false, (elChart.series[0].data.length > 20)); // add the point
          elChart.series[1].addPoint([data.time,data.latency.max], false, (elChart.series[1].data.length > 20)); // add the point
          elChart.series[2].addPoint([data.time,data.latency.avg], true, (elChart.series[2].data.length > 20)); // add the point
      });

      socket.on('cligc', function(data){
        gcChart.series[0].addPoint([data.time,data.size], false, (gcChart.series[0].data.length > 20));// add the point
        gcChart.series[1].addPoint([data.time,data.used], true, (gcChart.series[1].data.length > 20));// add the point
      });

      socket.on('cliloop', function(data){
          var timeInSec   = new Date().getTime();
          loChart.series[0].addPoint([timeInSec,data.maximum], true, (loChart.series[0].data.length > 20));// add the point
          loChart.series[1].addPoint([timeInSec,data.minimum], true, (loChart.series[1].data.length > 20));// add the point
          loChart.series[2].addPoint([timeInSec,data.average], true, (loChart.series[2].data.length > 20));// add the point

      });

      function sendToServer(obj){
        console.log('sendToServer')
        socket.emit('changeserver',obj);
      };

      function resetGraph(){
        console.log("resetGraph called");
        resetCpuChart();
        resetMemoryChart();
        resetEvtChart();
        resetGcChart();
        resetLoChart();
      }

      </script>
  </body>
</html>
